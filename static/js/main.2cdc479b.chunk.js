(this.webpackJsonpmidimarkers=this.webpackJsonpmidimarkers||[]).push([[0],{79:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),o=a.n(i),s=a(28),c=a.n(s),u=a(15),d=a(35),f=a(42),l=a(11),m=(a(79),a(145)),p=a(144),v=a(148),j=a(149),h=a(147),b=a(51),O=a(61),g=a(2),x=function(e){var t=e.onDrop,a=r.a.useState(!1),n=Object(l.a)(a,2),i=n[0],o=n[1],s=r.a.useState(""),c=Object(l.a)(s,2),u=c[0],d=c[1],f=r.a.createRef(),m=0,p=function(e){e.preventDefault(),e.stopPropagation()},v=function(e){e.preventDefault(),e.stopPropagation(),m++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&o(!0)},j=function(e){e.preventDefault(),e.stopPropagation(),0===--m&&o(!1)},h=function(e){e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(t(e.dataTransfer.files[0]),d(e.dataTransfer.files[0].name),e.dataTransfer.clearData(),m=0)};return r.a.useEffect((function(){var e=f.current;return e.addEventListener("dragenter",v),e.addEventListener("dragleave",j),e.addEventListener("dragover",p),e.addEventListener("drop",h),function(){e.removeEventListener("dragenter",v),e.removeEventListener("dragleave",j),e.removeEventListener("dragover",p),e.removeEventListener("drop",h)}})),Object(g.jsx)("div",{ref:f,className:i?"filedrop drag":u?"filedrop ready":"filedrop",children:u&&!i?Object(g.jsx)("div",{children:u}):Object(g.jsx)("div",{children:"Drop a file here!"})})},D=function(e){var t=e/1e3,a=parseInt(t/60);return Object(O.sprintf)("%(m)02d:%(s)06.3f",{m:a,s:t-60*a})};function E(){var e=r.a.useState(""),t=Object(l.a)(e,2),a=(t[0],t[1],r.a.useState()),n=Object(l.a)(a,2),i=n[0],o=n[1],s=r.a.useState(),O=Object(l.a)(s,2),E=O[0],k=O[1],w=r.a.useState(),y=Object(l.a)(w,2),S=y[0],T=y[1],L=r.a.useState(""),C=Object(l.a)(L,2),I=C[0],M=C[1],P=function(){var e=Object(f.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FileReader).onload=function(){var e=Object(f.a)(c.a.mark((function e(a){var n,r,i,s,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new b.Midi(a.target.result),r=[],i={Format:"decimal",Type:"Cue"},n.tracks.forEach((function(e){var a=e.notes;console.log("Track ",e.instrument.name," has ",e.notes.length),a.forEach((function(a){r.push(Object(d.a)(Object(d.a)({Name:a.name,Start:D(1e3*a.time),"Duration Time":D(1e3*a.duration)},i),{},{Description:null!==S&&void 0!==S?S:"".concat(t.name," : ").concat(e.instrument.name)}))}))})),s=[Object.keys(r[0]).join("\t")].concat(Object(u.a)(r.map((function(e){return Object.values(e).join("\t")})))).join("\n"),"data:text/csv;charset=utf-8,"+s,f=encodeURI(s),M(s),o(f),k("".concat(t.name,".csv"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsArrayBuffer(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(h.a,{maxWidth:"sm",children:Object(g.jsx)(v.a,{sx:{my:4},children:Object(g.jsx)(j.a,{variant:"h4",component:"h1",gutterBottom:!0,children:"MIDI to Marker CSV"})})}),Object(g.jsxs)(v.a,{component:"form",noValidate:!0,sx:{mt:1},children:[Object(g.jsx)(x,{onDrop:P}),Object(g.jsx)(p.a,{margin:"normal",fullWidth:!0,label:"Description (Optional)",name:"description",helperText:"Each marker will use the track's instrument name by default, use this field to override this. e.g. Creating multiple CSVs for different instruments if you only have one instrument per midi file",onChange:function(e){return T(e.target.value)},autoFocus:!0}),Object(g.jsx)(m.a,{component:"a",href:i,download:E,fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Download CSV"}),Object(g.jsx)("textarea",{style:{width:"100%",height:"300"},value:I})]})]})}var k=document.getElementById("root");o.a.render(Object(g.jsx)(n.StrictMode,{children:Object(g.jsx)(E,{})}),k)}},[[97,1,2]]]);
//# sourceMappingURL=main.2cdc479b.chunk.js.map